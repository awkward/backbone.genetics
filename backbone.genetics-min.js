(function(){!function(a,b){return"function"==typeof define&&define.amd?define(["exports","underscore","backbone"],b):"object"==typeof exports?b(exports,require("underscore"),require("backbone")):a.Backbone.Modal=b(a.commonJsStrict={},a._,a.Backbone)}(this,function(a,b,c){return c.Genetics=function(){function a(a){this.options=null!=a?a:{},this.genes=this.options.genes||{},this.views=this.options.views||[]}return a.prototype.bind=function(a){if(!(a||a instanceof c.View))throw"No view to bind to, please pass along your view as bind(view)";return this.setViewEvents(a),this.setGenes(a),this.views.push(a)},a.prototype.setViewEvents=function(a){return a.listenTo(a,"dom:refresh",function(b){return function(){return b.setGenes(a)}}(this)),a.listenTo(a,"destroy",function(b){return function(){return b.remove(a)}}(this))},a.prototype.setGenes=function(a){var c,d,e,f,g,h,i,j,k,l,m,n;for(e=a.$("[data-gene]"),h=!0,n=[],j=0,l=e.length;l>j;j++){for(d=e[j],g=$(d).data("gene").split(" "),k=0,m=g.length;m>k;k++)f=g[k],(!b.isUndefined(this.genes[""+f])||this.genes[""+f])&&(h=!1);h?($(d).remove(),n.push(function(){var b;b=[];for(f in g)b.push(a.bindings?function(){var b;b=[];for(c in a.bindings)i=a.bindings[c].selector||a.bindings[c],b.push(i==="[data-gene="+f+"]"?delete a.bindings[c]:void 0);return b}():void 0);return b}())):n.push(void 0)}return n},a.prototype.remove=function(a){return this.views=b.without(this.views,a)},a.prototype.set=function(a){var b,c;c=[];for(b in a)c.push(this.genes[""+b]=a[b]);return c},a}()})}).call(this);